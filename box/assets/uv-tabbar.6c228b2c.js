var e,t,a,l,i,o;import{a as s}from"./uv-image.5a3dfda3.js";import{m as r,a as n,o as u,c as d,w as c,d as h,t as p,f as v,n as b,g as f,i as m,l as y,p as g,b as S,h as _,F as x,r as $,e as C,L as N}from"./index-2a5fc252.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";const w={props:{isDot:{type:Boolean,default:!1},value:{type:[Number,String],default:""},show:{type:Boolean,default:!0},max:{type:[Number,String],default:999},type:{type:[String,void 0,null],default:"error"},showZero:{type:Boolean,default:!1},bgColor:{type:[String,null],default:null},color:{type:[String,null],default:null},shape:{type:[String,void 0,null],default:"circle"},numberType:{type:[String,void 0,null],default:"overflow"},offset:{type:Array,default:()=>[]},inverted:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.badge}};const D=k({name:"uv-badge",mixins:[r,n,w],computed:{boxStyle:()=>({}),badgeStyle(){const e={};if(this.color&&(e.color=this.color),this.bgColor&&!this.inverted&&(e.backgroundColor=this.bgColor),this.absolute&&(e.position="absolute",this.offset.length)){const t=this.offset[0],a=this.offset[1]||t;e.top=this.$uv.addUnit(t),e.right=this.$uv.addUnit(a)}return e},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}},propsType(){return this.type||"error"}}},[["render",function(e,t,a,l,i,o){const s=m;return e.show&&(0!==Number(e.value)||e.showZero||e.isDot)?(u(),d(s,{key:0,class:v([[e.isDot?"uv-badge--dot":"uv-badge--not-dot",e.inverted&&"uv-badge--inverted","horn"===e.shape&&"uv-badge--horn",`uv-badge--${o.propsType}${e.inverted?"--inverted":""}`],"uv-badge"]),style:b([e.$uv.addStyle(e.customStyle),o.badgeStyle])},{default:c(()=>[h(p(e.isDot?"":o.showValue),1)]),_:1},8,["class","style"])):f("",!0)}],["__scopeId","data-v-79f791a7"]]);const B=k({name:"uv-tabbar-item",mixins:[r,n,{props:{name:{type:[String,Number,null],default:null},icon:{icon:String,default:""},iconSize:{type:[String,Number],default:""},badge:{type:[String,Number,null],default:null},dot:{type:Boolean,default:!1},text:{type:String,default:""},badgeStyle:{type:[Object,String],default:"top: 6px;right:2px;"},...null==(l=null==(a=uni.$uv)?void 0:a.props)?void 0:l.tabbarItem}}],emits:["click","change"],data:()=>({isActive:!1,parentData:{value:null,activeColor:"",inactiveColor:"",iconSize:20}}),created(){this.init()},methods:{init(){this.updateParentData(),this.parent||this.$uv.error("uv-tabbar-item必须搭配uv-tabbar组件使用");const e=this.parent.children.indexOf(this);this.isActive=(this.name||e)===this.parentData.value},updateParentData(){this.getParentData("uv-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick(()=>{const e=this.parent.children.indexOf(this),t=this.name||e;t!==this.parent.value&&this.parent.$emit("change",t),this.$emit("click",t)})}}},[["render",function(e,t,a,l,i,o){const r=y(g("uv-icon"),s),n=y(g("uv-badge"),D),v=C,f=m;return u(),d(v,{class:"uv-tabbar-item",style:b([e.$uv.addStyle(e.customStyle)]),onClick:o.clickHandler},{default:c(()=>[S(v,{class:"uv-tabbar-item__icon"},{default:c(()=>[e.icon?(u(),d(r,{key:0,name:e.icon,color:i.isActive?i.parentData.activeColor:i.parentData.inactiveColor,size:e.iconSize?e.iconSize:i.parentData.iconSize},null,8,["name","color","size"])):(u(),_(x,{key:1},[i.isActive?$(e.$slots,"active-icon",{key:0},void 0,!0):$(e.$slots,"inactive-icon",{key:1},void 0,!0)],64)),S(n,{absolute:"",offset:[0,e.dot?"34rpx":e.badge>9?"14rpx":"20rpx"],customStyle:e.badgeStyle,isDot:e.dot,value:e.badge||(e.dot?1:null),show:e.dot||e.badge>0},null,8,["offset","customStyle","isDot","value","show"])]),_:3}),$(e.$slots,"text",{},()=>[S(f,{class:"uv-tabbar-item__text",style:b({color:i.isActive?i.parentData.activeColor:i.parentData.inactiveColor})},{default:c(()=>[h(p(e.text),1)]),_:1},8,["style"])],!0)]),_:3},8,["style","onClick"])}],["__scopeId","data-v-b90ffc42"]]);const z=k({name:"uv-safe-bottom",mixins:[r,n],data:()=>({safeAreaBottomHeight:0,isNvue:!1}),computed:{style(){return this.$uv.deepMerge({},this.$uv.addStyle(this.customStyle))}},mounted(){}},[["render",function(e,t,a,l,i,o){const s=C;return u(),d(s,{class:v(["uv-safe-bottom",[!i.isNvue&&"uv-safe-area-inset-bottom"]]),style:b([o.style])},null,8,["style","class"])}],["__scopeId","data-v-8065622b"]]);const I=k({name:"uv-tabbar",mixins:[r,n,{props:{value:{type:[String,Number,null],default:null},safeAreaInsetBottom:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:9},activeColor:{type:String,default:"#1989fa"},inactiveColor:{type:String,default:"#7d7e80"},fixed:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!0},iconSize:{type:[String,Number],default:20},...null==(o=null==(i=uni.$uv)?void 0:i.props)?void 0:o.tabbar}}],data:()=>({placeholderHeight:0}),computed:{tabbarStyle(){const e={zIndex:this.zIndex};return this.$uv.deepMerge(e,this.$uv.addStyle(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map(e=>e.updateFromParent())},async setPlaceholderHeight(){this.fixed&&this.placeholder&&(await this.$uv.sleep(20),this.$uvGetRect(".uv-tabbar__content").then(({height:e=50})=>{this.placeholderHeight=e}))}}},[["render",function(e,t,a,l,i,o){const s=C,r=y(g("uv-safe-bottom"),z);return u(),d(s,{class:"uv-tabbar"},{default:c(()=>[S(s,{class:v(["uv-tabbar__content",[e.border&&"uv-border-top",e.fixed&&"uv-tabbar--fixed"]]),ref:"uv-tabbar__content",onTouchmove:N(e.noop,["stop","prevent"]),style:b([o.tabbarStyle])},{default:c(()=>[S(s,{class:"uv-tabbar__content__item-wrapper"},{default:c(()=>[$(e.$slots,"default",{},void 0,!0)]),_:3}),e.safeAreaInsetBottom?(u(),d(r,{key:0})):f("",!0)]),_:3},8,["onTouchmove","class","style"]),e.placeholder?(u(),d(s,{key:0,class:"uv-tabbar__placeholder",style:b({height:i.placeholderHeight+"px"})},null,8,["style"])):f("",!0)]),_:3})}],["__scopeId","data-v-4db96c7f"]]);export{B as _,I as a,D as b,w as u};
