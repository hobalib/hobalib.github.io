var e,t;import{m as s,a as i,l as a,p as l,o as r,c as o,w as n,b as c,r as d,n as u,h as p,F as h,j as _,f as m,d as b,t as g,i as v,e as f,C as y,x as w,y as x,z as S,O as $,A as C,V as k}from"./index-2a5fc252.js";import{_ as B,a as z}from"./uv-image.5a3dfda3.js";import{u as R,b as T,_ as j,a as L}from"./uv-tabbar.6c228b2c.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import{u as P}from"./app.ec4b7cd2.js";const O=W({name:"uv-tabs",emits:["click","change"],mixins:[s,i,{props:{duration:{type:Number,default:300},list:{type:Array,default:()=>[]},lineColor:{type:String,default:"#3c9cff"},activeStyle:{type:[String,Object],default:()=>({color:"#303133"})},inactiveStyle:{type:[String,Object],default:()=>({color:"#606266"})},lineWidth:{type:[String,Number],default:20},lineHeight:{type:[String,Number],default:3},lineBgSize:{type:String,default:"cover"},itemStyle:{type:[String,Object],default:()=>({height:"44px"})},scrollable:{type:Boolean,default:!0},current:{type:[Number,String],default:0},keyName:{type:String,default:"name"},...null==(t=null==(e=uni.$uv)?void 0:e.props)?void 0:t.tabs}}],data:()=>({firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}),watch:{current:{immediate:!0,handler(e,t){e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick(()=>{this.resize()}))}},list(){this.$nextTick(()=>{this.resize()})}},computed:{textStyle(){return e=>{const t={},s=e==this.innerCurrent?this.$uv.addStyle(this.activeStyle):this.$uv.addStyle(this.inactiveStyle);return this.list[e].disabled&&(t.color="#c8c9cc"),this.$uv.deepMerge(s,t)}},propsBadge:()=>R},async mounted(){this.init()},methods:{setLineLeft(){const e=this.list[this.innerCurrent];if(!e)return;let t=this.list.slice(0,this.innerCurrent).reduce((e,t)=>e+t.rect.width,0),s=this.$uv.getPx(this.lineWidth);this.$uv.test.number(this.lineWidth)&&this.$uv.unit&&(s=this.$uv.getPx(`${this.lineWidth}${this.$uv.unit}`)),this.lineOffsetLeft=t+(e.rect.width-s)/2,this.firstTime&&setTimeout(()=>{this.firstTime=!1},20)},animation(e,t=0){},clickHandler(e,t){this.$emit("click",{...e,index:t}),e.disabled||(this.innerCurrent!=t&&this.$emit("change",{...e,index:t}),this.innerCurrent=t,this.$nextTick(()=>{this.resize()}))},init(){this.$uv.sleep().then(()=>{this.resize()})},setScrollLeft(){const e=this.list[this.innerCurrent],t=this.list.slice(0,this.innerCurrent).reduce((e,t)=>e+t.rect.width,0),s=this.$uv.sys().windowWidth;let i=t-(this.tabsRect.width-e.rect.width)/2-(s-this.tabsRect.right)/2+this.tabsRect.left/2;i=Math.min(i,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,i)},resize(){0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then(([e,t=[]])=>{this.tabsRect=e,this.scrollViewWidth=0,t.map((e,t)=>{this.scrollViewWidth+=e.width,this.list[t].rect=e}),this.setLineLeft(),this.setScrollLeft()})},getTabsRect(){return new Promise(e=>{this.queryRect("uv-tabs__wrapper__scroll-view").then(t=>e(t))})},getAllItemRect(){return new Promise(e=>{const t=this.list.map((e,t)=>this.queryRect(`uv-tabs__wrapper__nav__item-${t}`,!0));Promise.all(t).then(t=>e(t))})},queryRect(e,t){return new Promise(t=>{this.$uvGetRect(`.${e}`).then(e=>{t(e)})})}}},[["render",function(e,t,s,i,w,x){const S=v,$=a(l("uv-badge"),T),C=f,k=y;return r(),o(C,{class:"uv-tabs",style:u([e.$uv.addStyle(e.customStyle)])},{default:n(()=>[c(C,{class:"uv-tabs__wrapper"},{default:n(()=>[d(e.$slots,"left",{},void 0,!0),c(C,{class:"uv-tabs__wrapper__scroll-view-wrapper"},{default:n(()=>[c(k,{"scroll-x":e.scrollable,"scroll-left":w.scrollLeft,"scroll-with-animation":"",class:"uv-tabs__wrapper__scroll-view","show-scrollbar":!1,ref:"uv-tabs__wrapper__scroll-view"},{default:n(()=>[c(C,{class:"uv-tabs__wrapper__nav",ref:"uv-tabs__wrapper__nav",style:u({flex:e.scrollable?"":1})},{default:n(()=>[(r(!0),p(h,null,_(e.list,(t,s)=>(r(),o(C,{class:m(["uv-tabs__wrapper__nav__item",[`uv-tabs__wrapper__nav__item-${s}`,t.disabled&&"uv-tabs__wrapper__nav__item--disabled"]]),key:s,onClick:e=>x.clickHandler(t,s),ref_for:!0,ref:`uv-tabs__wrapper__nav__item-${s}`,style:u([{flex:e.scrollable?"":1},e.$uv.addStyle(e.itemStyle)])},{default:n(()=>[c(S,{class:m([[t.disabled&&"uv-tabs__wrapper__nav__item__text--disabled"],"uv-tabs__wrapper__nav__item__text"]),style:u([x.textStyle(s)])},{default:n(()=>[b(g(t[e.keyName]),1)]),_:2},1032,["class","style"]),c($,{show:!(!t.badge||!(t.badge.show||t.badge.isDot||t.badge.value)),isDot:t.badge&&t.badge.isDot||x.propsBadge.isDot,value:t.badge&&t.badge.value||x.propsBadge.value,max:t.badge&&t.badge.max||x.propsBadge.max,type:t.badge&&t.badge.type||x.propsBadge.type,showZero:t.badge&&t.badge.showZero||x.propsBadge.showZero,bgColor:t.badge&&t.badge.bgColor||x.propsBadge.bgColor,color:t.badge&&t.badge.color||x.propsBadge.color,shape:t.badge&&t.badge.shape||x.propsBadge.shape,numberType:t.badge&&t.badge.numberType||x.propsBadge.numberType,inverted:t.badge&&t.badge.inverted||x.propsBadge.inverted,customStyle:"margin-left: 4px;"},null,8,["show","isDot","value","max","type","showZero","bgColor","color","shape","numberType","inverted"])]),_:2},1032,["onClick","style","class"]))),128)),c(C,{class:"uv-tabs__wrapper__nav__line",ref:"uv-tabs__wrapper__nav__line",style:u([{width:e.$uv.addUnit(e.lineWidth),transform:`translate(${w.lineOffsetLeft}px)`,transitionDuration:`${w.firstTime?0:e.duration}ms`,height:w.firstTime?0:e.$uv.addUnit(e.lineHeight),background:e.lineColor,backgroundSize:e.lineBgSize}])},null,8,["style"])]),_:1},8,["style"])]),_:1},8,["scroll-x","scroll-left"])]),_:1}),d(e.$slots,"right",{},void 0,!0)]),_:3})]),_:3},8,["style"])}],["__scopeId","data-v-02da80e0"]]),A=W(w({__name:"index",setup(e){const t=P(),s=x([]),i=x([]);S();const d=[{category_name:"科幻",contents:[{title:"天空酒店",description:"天空酒店除了提供壮观的天空景色外，天空酒店还将配备各种舒适设施，包括没事，健身房和其他娱乐设施，确保旅客拥有一次难忘的太空之旅",preview_image_address:"/box/assets/1-51b234dc.png",date:"2024-11-07"},{title:"走向未来",description:"2084 年，人类已掌握星际旅行技术，巨大的星际飞船到达外星球上空，人们从飞船中走向未来",preview_image_address:"/box/assets/2-036d1468.png",date:"2024-11-07"}]},{category_name:"运动",contents:[{title:"旅途中的杰作",description:"清晨，云雾缭绕。薄雾笼罩着大地上的一切，给美丽的大自然蒙上了一层轻纱。飘渺中，让人觉得一切都是那么神秘莫测，如梦幻般的仙境。",preview_image_address:"/box/assets/3-d9a14a98.png",date:"2024-11-07"}]}],u={},m={height:"130rpx",padding:"0 40rpx"};function v(e){const{index:t}=e;i.value=d[t].contents}function y(){k({url:"/pages/gameList/index"})}return $(()=>{s.value=d.map(e=>({name:e.category_name})),i.value=d[0].contents}),(e,d)=>{const w=f,x=a(l("uv-image"),B),S=a(l("uv-tabs"),O),$=a(l("uv-icon"),z),k=a(l("uv-tabbar-item"),j),R=a(l("uv-tabbar"),L);return r(),o(w,{class:"promotion-page-container"},{default:n(()=>[c(w,{class:"itcode-flex-col ppc-wapper"},{default:n(()=>[c(w,{class:"itcode-flex-row itcode-justify-center content-one"},{default:n(()=>[c(w,{class:"xjjy-block"},{default:n(()=>[c(w,{class:"title"},{default:n(()=>[b(g(e.$t("promotionPage.starRescue")),1)]),_:1}),c(x,{src:C("/box/assets/s-bg-c6b92ab6.jpg"),width:"100%",height:"100%",radius:10,mode:"aspectFill"},null,8,["src"])]),_:1})]),_:1}),c(w,{class:"content-two"},{default:n(()=>[c(w,{class:"tab-box"},{default:n(()=>[c(S,{list:C(s),activeStyle:{fontSize:"39rpx",color:"#28A8B2"},inactiveStyle:{fontSize:"39rpx",color:"rgba(255, 255, 255, 0.35)"},lineWidth:10,lineHeight:10,customStyle:u,itemStyle:m,lineColor:"#28A8B2",onChange:v},null,8,["list","inactiveStyle"]),c(w,{class:"itcode-flex-col itcode-items-center itcode-justify-center data-box-list"},{default:n(()=>[(r(!0),p(h,null,_(C(i),(e,t)=>(r(),o(w,{class:"itcode-flex-row dbl-item",key:t},{default:n(()=>[c(w,{class:"dbl-item-left"},{default:n(()=>[c(x,{src:e.preview_image_address,width:"100%",height:"100%",mode:"aspectFill"},null,8,["src"])]),_:2},1024),c(w,{class:"dbl-item-right"},{default:n(()=>[c(w,{class:"dir-title"},{default:n(()=>[b(g(e.title),1)]),_:2},1024),c(w,{class:"dir-content"},{default:n(()=>[b(g(e.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),c(R,{value:0,activeColor:C(t).themeColor,customStyle:{background:"#121212",border:"none"}},{default:n(()=>[c(k,null,{"active-icon":n(()=>[c($,{name:"shouye","custom-prefix":"custom-icon",size:30,color:C(t).themeColor},null,8,["color"])]),"inactive-icon":n(()=>[c($,{name:"shouye","custom-prefix":"custom-icon",size:30,color:"#7d7e80"})]),_:1}),c(k,{onClick:y},{"active-icon":n(()=>[c($,{name:"wode","custom-prefix":"custom-icon",size:25,color:C(t).themeColor},null,8,["color"])]),"inactive-icon":n(()=>[c($,{name:"wode","custom-prefix":"custom-icon",size:25,color:"#7d7e80"})]),_:1})]),_:1},8,["activeColor"])]),_:1})}}}),[["__scopeId","data-v-f2d896c6"]]);export{A as default};
